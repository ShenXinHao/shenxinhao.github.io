<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Unity中的协程 | 沈鑫豪の博客</title><meta name="author" content="沈鑫豪"><meta name="copyright" content="沈鑫豪"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="协程的概念Unity手册的原文解释如下： “A coroutine allows you to spread tasks across several frames. In Unity, a coroutine is a method that can pause execution and return control to Unity but then continue where it le">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity中的协程">
<meta property="og:url" content="https://shenxinhao.github.io/2023/03/07/Coroutine/index.html">
<meta property="og:site_name" content="沈鑫豪の博客">
<meta property="og:description" content="协程的概念Unity手册的原文解释如下： “A coroutine allows you to spread tasks across several frames. In Unity, a coroutine is a method that can pause execution and return control to Unity but then continue where it le">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://shenxinhao.github.io/2023/03/07/Coroutine/pexels-jaime.jpg">
<meta property="article:published_time" content="2023-03-07T15:36:00.000Z">
<meta property="article:modified_time" content="2023-04-05T02:59:05.827Z">
<meta property="article:author" content="沈鑫豪">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://shenxinhao.github.io/2023/03/07/Coroutine/pexels-jaime.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://shenxinhao.github.io/2023/03/07/Coroutine/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Unity中的协程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-05 10:59:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/qianfantian.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/2023/03/07/Coroutine/pexels-jaime.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="沈鑫豪の博客"><span class="site-name">沈鑫豪の博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Unity中的协程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-07T15:36:00.000Z" title="发表于 2023-03-07 23:36:00">2023-03-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-05T02:59:05.827Z" title="更新于 2023-04-05 10:59:05">2023-04-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Unity/">Unity</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>4分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Unity中的协程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="协程的概念"><a href="#协程的概念" class="headerlink" title="协程的概念"></a>协程的概念</h2><p>Unity手册的原文解释如下：</p>
<p>“A coroutine allows you to spread tasks across several frames. In Unity, a coroutine is a method that can pause execution and return control to Unity but then continue where it left off on the following frame.</p>
<p>In most situations, when you call a method, it runs to completion and then returns control to the calling method, plus any optional return values. This means that any action that takes place within a method must happen within a single frame update.</p>
<p>In situations where you would like to use a method call to contain a procedural animation or a sequence of events over time, you can use a coroutine.</p>
<p>However, it’s important to remember that coroutines aren’t threads. Synchronous operations that run within a coroutine still execute on the main thread. If you want to reduce the amount of CPU time spent on the main thread, it’s just as important to avoid blocking operations in coroutines as in any other script code. If you want to use multi-threaded code within Unity, consider the <a target="_blank" rel="noopener" href="https://docs.unity3d.com/cn/2023.1/Manual/JobSystem.html">C# Job System</a>.</p>
<p>It’s best to use coroutines if you need to deal with long asynchronous operations, such as waiting for HTTP transfers, asset loads, or file I/O to complete.”</p>
<p>翻译如下：</p>
<p>协程允许您将任务分散到多个帧中。 在 Unity 中，协程是一种可以暂停执行并将控制权返回给 Unity，然后在下一帧从中断处继续执行的方法。</p>
<p>在大多数情况下，当您调用一个方法时，它会运行到完成，然后将控制权返回给调用方法，以及任何可选的返回值。 这意味着在一个方法中发生的任何动作都必须在单个帧更新中发生。<br>在您希望使用方法调用来包含过程动画或随时间变化的事件序列的情况下，您可以使用协程。</p>
<p>但是，重要的是要记住协程不是线程。 在协程中运行的同步操作仍然在主线程上执行。 如果您想减少花在主线程上的 CPU 时间，避免协程中的阻塞操作与在任何其他脚本代码中一样重要。 如果您想在 Unity 中使用多线程代码，请考虑 C# Job System。</p>
<p>如果您需要处理长时间的异步操作，例如等待 HTTP 传输、资产加载或文件 I/O 完成，最好使用协程。</p>
<hr>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>Unity官方的解释中说道，可以将任务分散到多个帧中，而不必在一个帧内完成，这样可以将某些操作造成的卡顿减轻。同时也可以实现诸如完成某个动作之后再继执行后续操作的需求。</p>
<h3 id="声明协程函数"><a href="#声明协程函数" class="headerlink" title="声明协程函数"></a>声明协程函数</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">Test</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="comment">//func</span></span><br><span class="line"> <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">//返回的是一个IEnumerator 对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动协程的方式"><a href="#启动协程的方式" class="headerlink" title="启动协程的方式"></a>启动协程的方式</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if have parameter, StartCoroutine(&quot;Test&quot;, parameter) also can start the coroutine</span></span><br><span class="line">StartCoroutine(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line"><span class="comment">// directly call</span></span><br><span class="line">StartCoroutine(Test());</span><br></pre></td></tr></table></figure>

<h3 id="协程停止的方式"><a href="#协程停止的方式" class="headerlink" title="协程停止的方式"></a>协程停止的方式</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">StopCoroutine(<span class="built_in">string</span> MethodName);</span><br><span class="line">StopCoroutine(Coroutine coroutine);</span><br><span class="line">StopCoroutine(IEnumerator routine);</span><br><span class="line"><span class="comment">//Stops all coroutines running on this behaviour.</span></span><br><span class="line">StopAllCoroutine();</span><br><span class="line"></span><br><span class="line"><span class="comment">//First</span></span><br><span class="line">StopCoroutine(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Secend</span></span><br><span class="line">Coroutine coroutine = StartCoroutine(Test());</span><br><span class="line">StopCoroutine(coroutine);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Third</span></span><br><span class="line">StopCoroutine(Test());</span><br><span class="line"></span><br><span class="line"><span class="comment">//最后记住，如果要停止协程，那么请保持start 和 stop 函数的参数一致性。</span></span><br><span class="line"><span class="comment">//禁用mono behavior (也就是将enable 设置为false)并不会停止协程，当setActive(False)，协程会停止。</span></span><br><span class="line"><span class="comment">//Destroy(xxx)会立即触发OnDisable，并会处理协程，从而有效的停止协程，最后在帧的末尾调用onDestroy()</span></span><br></pre></td></tr></table></figure>

<p>接下来就是关于挂起的yield，yield在unity脚本的生命周期之中的不同位置，具体查看 <a target="_blank" rel="noopener" href="https://www.notion.so/8df042d96d4848ada21eefef1d37be1d">生命周期</a> 。</p>
<p>常用的yield有如下几种：</p>
<table>
<thead>
<tr>
<th>yield return null;</th>
<th>下一帧再执行后续代码</th>
</tr>
</thead>
<tbody><tr>
<td>yield return 6;(任意数字)</td>
<td>下一帧再执行后续代码</td>
</tr>
<tr>
<td>yield break;</td>
<td>直接结束该协程的后续操作</td>
</tr>
<tr>
<td>yield return asyncOperation;</td>
<td>等异步操作结束后再执行后续代码</td>
</tr>
<tr>
<td>yield return StartCoroution(其它协程);</td>
<td>调用执行其它协程后再执行后续代码</td>
</tr>
<tr>
<td>yield return WWW();</td>
<td>等待WWW操作完成后再执行后续代码</td>
</tr>
<tr>
<td>yield return new WaitForEndOfFrame();</td>
<td>等待帧结束,等待直到所有的摄像机和GUI被渲染完成后，在该帧显示在屏幕之前执行</td>
</tr>
<tr>
<td>yield return new WaitForSeconds(0.3f);</td>
<td>等待0.3秒，一段指定的时间延迟之后继续执行，在所有的Update函数完成调用的那一帧之后（这里的时间会受到Time.timeScale的影响）;</td>
</tr>
<tr>
<td>yield return new WaitForSecondsRealtime(0.3f);</td>
<td>等待0.3秒，一段指定的时间延迟之后继续执行，在所有的Update函数完成调用的那一帧之后（这里的时间不受到Time.timeScale的影响）;</td>
</tr>
<tr>
<td>yield return WaitForFixedUpdate();</td>
<td>等待下一次FixedUpdate开始时再执行后续代码</td>
</tr>
<tr>
<td>yield return new WaitUntil()</td>
<td>将协同执行直到当输入的参数（或者委托）为true的时候</td>
</tr>
<tr>
<td>yield return new WaitWhile()</td>
<td>将协同执行直到 当输入的参数（或者委托）为false的时候</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://shenxinhao.github.io">沈鑫豪</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://shenxinhao.github.io/2023/03/07/Coroutine/">https://shenxinhao.github.io/2023/03/07/Coroutine/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://shenxinhao.github.io" target="_blank">沈鑫豪の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/2023/03/07/Coroutine/pexels-jaime.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2023/03/13/Ternary/" title="逻辑运算符与三元运算符的实现"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">逻辑运算符与三元运算符的实现</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/qianfantian.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">沈鑫豪</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ShenXinHao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/178845100?spm_id_from=333.1007.0.0" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="mailto:alan1571988545@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果你发现我的博客中有错误的地方，请及时联系我更正。,感谢您的指正！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">协程的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%8D%8F%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text">声明协程函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%8D%8F%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">启动协程的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E5%81%9C%E6%AD%A2%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">协程停止的方式</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/07/ClassDiagram/" title="无题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2023/04/07/ClassDiagram/" title="无题">无题</a><time datetime="2023-04-07T12:40:32.927Z" title="发表于 2023-04-07 20:40:32">2023-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/07/ChainsofResponsibilityPattern/" title="无题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"/></a><div class="content"><a class="title" href="/2023/04/07/ChainsofResponsibilityPattern/" title="无题">无题</a><time datetime="2023-04-07T12:40:32.924Z" title="发表于 2023-04-07 20:40:32">2023-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/03/HexoTheme/" title="Hexo主题butterfly"><img src="/2023/04/03/HexoTheme/pexels-forest.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo主题butterfly"/></a><div class="content"><a class="title" href="/2023/04/03/HexoTheme/" title="Hexo主题butterfly">Hexo主题butterfly</a><time datetime="2023-04-03T14:57:57.122Z" title="发表于 2023-04-03 22:57:57">2023-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/02/HexoDeploy/" title="Hexo部署"><img src="/2023/04/02/HexoDeploy/pexels-eberhard.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo部署"/></a><div class="content"><a class="title" href="/2023/04/02/HexoDeploy/" title="Hexo部署">Hexo部署</a><time datetime="2023-04-02T07:49:39.259Z" title="发表于 2023-04-02 15:49:39">2023-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/02/Metatable/" title="Metatable"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Metatable"/></a><div class="content"><a class="title" href="/2023/04/02/Metatable/" title="Metatable">Metatable</a><time datetime="2023-04-01T16:36:53.729Z" title="发表于 2023-04-02 00:36:53">2023-04-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/2023/03/07/Coroutine/pexels-jaime.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 By 沈鑫豪</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: 'dc183c0585789bf65bbd',
      clientSecret: 'cb265ee5e5dbac0879b55bdcce0d1f3ffb33e7ff',
      repo: 'shenxinhao.github.io',
      owner: 'ShenXinHao',
      admin: ['ShenXinHao'],
      id: '93403f3711e55223b8cca2b1587416ae',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>